<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Compiler - MyCodeTime</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", "Consolas", "Monaco", monospace;
    }

    body {
      background: radial-gradient(circle at top, #2b1055, #09011a);
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Navbar */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      background: rgba(43, 16, 85, 0.8);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .logo {
      font-size: 22px;
      font-weight: bold;
      color: #fff;
      text-decoration: none;
    }

    .nav-links {
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .nav-links a {
      color: #ccc;
      text-decoration: none;
      transition: color 0.3s;
    }

    .nav-links a:hover {
      color: #7f5af0;
    }

    /* Compiler Container */
    .compiler-container {
      max-width: 1400px;
      margin: 30px auto;
      padding: 0 20px;
    }

    /* Controls Bar */
    .controls-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
      background: rgba(255, 255, 255, 0.05);
      padding: 15px 20px;
      border-radius: 12px;
      backdrop-filter: blur(10px);
    }

    .control-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .control-group label {
      font-size: 14px;
      color: #bdbdbd;
      font-weight: 500;
    }

    select {
      padding: 8px 15px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s;
    }

    select:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: #7f5af0;
    }

    select option {
      background: #2b1055;
      color: #fff;
    }

    .run-btn {
      padding: 10px 30px;
      background: linear-gradient(135deg, #7f5af0, #2cb67d);
      border: none;
      border-radius: 8px;
      color: #fff;
      font-weight: bold;
      font-size: 15px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .run-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(127, 90, 240, 0.4);
    }

    .run-btn:active {
      transform: translateY(0);
    }

    .run-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Editor and Output Container */
    .editor-output-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      height: calc(100vh - 250px);
      min-height: 500px;
    }

    /* Code Editor */
    .editor-section {
      display: flex;
      flex-direction: column;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .editor-header {
      background: rgba(255, 255, 255, 0.08);
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .editor-header h3 {
      font-size: 14px;
      color: #bdbdbd;
      font-weight: 600;
    }

    .editor-actions {
      display: flex;
      gap: 10px;
    }

    .editor-btn {
      padding: 5px 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 6px;
      color: #fff;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .editor-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: #7f5af0;
    }

    #codeEditor {
      flex: 1;
      width: 100%;
      padding: 20px;
      background: #1e1e1e;
      color: #d4d4d4;
      border: none;
      outline: none;
      resize: none;
      font-size: 14px;
      line-height: 1.6;
      font-family: "Consolas", "Monaco", "Courier New", monospace;
      tab-size: 2;
    }

    /* Theme Styles */
    body.theme-dark #codeEditor {
      background: #1e1e1e;
      color: #d4d4d4;
    }

    body.theme-light #codeEditor {
      background: #ffffff;
      color: #1e1e1e;
    }

    body.theme-monokai #codeEditor {
      background: #272822;
      color: #f8f8f2;
    }

    body.theme-dracula #codeEditor {
      background: #282a36;
      color: #f8f8f2;
    }

    body.theme-nord #codeEditor {
      background: #2e3440;
      color: #d8dee9;
    }

    /* Output Section */
    .output-section {
      display: flex;
      flex-direction: column;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .output-header {
      background: rgba(255, 255, 255, 0.08);
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .output-header h3 {
      font-size: 14px;
      color: #bdbdbd;
      font-weight: 600;
    }

    #output {
      flex: 1;
      padding: 20px;
      background: #1e1e1e;
      color: #4ec9b0;
      border: none;
      outline: none;
      resize: none;
      font-size: 14px;
      line-height: 1.6;
      font-family: "Consolas", "Monaco", "Courier New", monospace;
      overflow-y: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .output-error {
      color: #f48771;
    }

    .output-success {
      color: #4ec9b0;
    }

    /* Language Templates */
    .code-templates {
      display: none;
    }

    /* Responsive Design */
    @media (max-width: 968px) {
      .editor-output-container {
        grid-template-columns: 1fr;
        height: auto;
      }

      .editor-section {
        min-height: 400px;
      }

      .output-section {
        min-height: 200px;
      }

      .controls-bar {
        flex-direction: column;
        align-items: stretch;
      }

      .control-group {
        width: 100%;
        justify-content: space-between;
      }

      select {
        flex: 1;
      }
    }

    @media (max-width: 480px) {
      .navbar {
        padding: 15px 20px;
      }

      .compiler-container {
        padding: 0 15px;
        margin: 20px auto;
      }

      .controls-bar {
        padding: 12px 15px;
      }

      .run-btn {
        width: 100%;
        justify-content: center;
      }
    }

    /* Loading Spinner */
    .spinner {
      display: inline-block;
      width: 12px;
      height: 12px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Scrollbar Styling */
    #codeEditor::-webkit-scrollbar,
    #output::-webkit-scrollbar {
      width: 8px;
    }

    #codeEditor::-webkit-scrollbar-track,
    #output::-webkit-scrollbar-track {
      background: #1e1e1e;
    }

    #codeEditor::-webkit-scrollbar-thumb,
    #output::-webkit-scrollbar-thumb {
      background: #555;
      border-radius: 4px;
    }

    #codeEditor::-webkit-scrollbar-thumb:hover,
    #output::-webkit-scrollbar-thumb:hover {
      background: #777;
    }
  </style>
</head>
<body class="theme-dark">
  <!-- Navbar -->
  <nav class="navbar">
    <a href="index.html" class="logo">⚡ MyCodeTime</a>
    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="compiler.html">Compiler</a>
    </div>
  </nav>

  <!-- Compiler Container -->
  <div class="compiler-container">
    <!-- Controls Bar -->
    <div class="controls-bar">
      <div class="control-group">
        <label for="languageSelect">Language:</label>
        <select id="languageSelect">
          <option value="python">Python</option>
          <option value="javascript">JavaScript</option>
          <option value="java">Java</option>
          <option value="cpp">C++</option>
          <option value="c">C</option>
          <option value="csharp">C#</option>
        </select>
      </div>

      <div class="control-group">
        <label for="themeSelect">Theme:</label>
        <select id="themeSelect">
          <option value="dark">Dark</option>
          <option value="light">Light</option>
          <option value="monokai">Monokai</option>
          <option value="dracula">Dracula</option>
          <option value="nord">Nord</option>
        </select>
      </div>

      <button class="run-btn" id="runBtn">
        <span>▶</span>
        <span>Run Code</span>
      </button>
    </div>

    <!-- Editor and Output -->
    <div class="editor-output-container">
      <!-- Code Editor -->
      <div class="editor-section">
        <div class="editor-header">
          <h3>Code Editor</h3>
          <div class="editor-actions">
            <button class="editor-btn" id="clearBtn">Clear</button>
            <button class="editor-btn" id="formatBtn">Format</button>
          </div>
        </div>
        <textarea id="codeEditor" placeholder="Write your code here..."></textarea>
      </div>

      <!-- Output -->
      <div class="output-section">
        <div class="output-header">
          <h3>Output</h3>
        </div>
        <div id="output">Output will appear here...</div>
      </div>
    </div>
  </div>

  <!-- Code Templates (Hidden) -->
  <div class="code-templates">
    <template id="python-template"># Python Code
print("Hello, World!")

# Write your Python code here
def main():
    print("Welcome to MyCodeTime Compiler!")
    
if __name__ == "__main__":
    main()
</template>

    <template id="javascript-template">// JavaScript Code
console.log("Hello, World!");

// Write your JavaScript code here
function main() {
    console.log("Welcome to MyCodeTime Compiler!");
}

main();
</template>

    <template id="java-template">// Java Code
public class Main {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
        // Write your Java code here
    }
}
</template>

    <template id="cpp-template">// C++ Code
#include <iostream>
using namespace std;

int main() {
    cout << "Hello, World!" << endl;
    // Write your C++ code here
    return 0;
}
</template>

    <template id="c-template">// C Code
#include <stdio.h>

int main() {
    printf("Hello, World!\\n");
    // Write your C code here
    return 0;
}
</template>

    <template id="csharp-template">// C# Code
using System;

class Program {
    static void Main() {
        Console.WriteLine("Hello, World!");
        // Write your C# code here
    }
}
</template>
  </div>

  <script>
    // Get DOM elements
    const codeEditor = document.getElementById('codeEditor');
    const output = document.getElementById('output');
    const languageSelect = document.getElementById('languageSelect');
    const themeSelect = document.getElementById('themeSelect');
    const runBtn = document.getElementById('runBtn');
    const clearBtn = document.getElementById('clearBtn');
    const formatBtn = document.getElementById('formatBtn');

    // Code templates for each language
    const templates = {
      python: document.getElementById('python-template').textContent,
      javascript: document.getElementById('javascript-template').textContent,
      java: document.getElementById('java-template').textContent,
      cpp: document.getElementById('cpp-template').textContent,
      c: document.getElementById('c-template').textContent,
      csharp: document.getElementById('csharp-template').textContent
    };

    // Initialize editor with default template
    function initializeEditor() {
      const currentLang = languageSelect.value;
      if (!codeEditor.value.trim()) {
        codeEditor.value = templates[currentLang] || '';
      }
    }

    // Language change handler
    languageSelect.addEventListener('change', function() {
      const lang = this.value;
      if (confirm('Changing language will replace your current code. Continue?')) {
        codeEditor.value = templates[lang] || '';
      } else {
        // Revert selection
        this.value = Array.from(this.options).find(opt => opt.value === lang)?.value || 'python';
      }
    });

    // Theme change handler
    themeSelect.addEventListener('change', function() {
      const theme = this.value;
      document.body.className = `theme-${theme}`;
      
      // Update output background based on theme
      const outputElement = document.getElementById('output');
      if (theme === 'light') {
        outputElement.style.background = '#ffffff';
        outputElement.style.color = '#1e1e1e';
      } else if (theme === 'monokai') {
        outputElement.style.background = '#272822';
        outputElement.style.color = '#f8f8f2';
      } else if (theme === 'dracula') {
        outputElement.style.background = '#282a36';
        outputElement.style.color = '#f8f8f2';
      } else if (theme === 'nord') {
        outputElement.style.background = '#2e3440';
        outputElement.style.color = '#d8dee9';
      } else {
        outputElement.style.background = '#1e1e1e';
        outputElement.style.color = '#4ec9b0';
      }
    });

    // Run code handler
    runBtn.addEventListener('click', function() {
      runCode();
    });

    // Clear button handler
    clearBtn.addEventListener('click', function() {
      if (confirm('Are you sure you want to clear the editor?')) {
        codeEditor.value = '';
        output.textContent = 'Output will appear here...';
        output.className = '';
      }
    });

    // Format button handler
    formatBtn.addEventListener('click', function() {
      formatCode();
    });

    // Keyboard shortcut: Ctrl+Enter to run
    codeEditor.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.key === 'Enter') {
        e.preventDefault();
        runCode();
      }
      // Tab key handling for indentation
      if (e.key === 'Tab') {
        e.preventDefault();
        const start = this.selectionStart;
        const end = this.selectionEnd;
        this.value = this.value.substring(0, start) + '  ' + this.value.substring(end);
        this.selectionStart = this.selectionEnd = start + 2;
      }
    });

    // Run code function
    function runCode() {
      const code = codeEditor.value;
      const language = languageSelect.value;

      if (!code.trim()) {
        output.textContent = 'Error: No code to execute!';
        output.className = 'output-error';
        return;
      }

      // Disable run button and show loading
      runBtn.disabled = true;
      const originalText = runBtn.innerHTML;
      runBtn.innerHTML = '<span class="spinner"></span> Running...';

      output.textContent = 'Running code...\n';
      output.className = '';

      // Simulate code execution (in a real implementation, this would call a backend API)
      setTimeout(() => {
        try {
          const result = executeCode(code, language);
          output.textContent = result;
          output.className = 'output-success';
        } catch (error) {
          output.textContent = `Error: ${error.message}`;
          output.className = 'output-error';
        } finally {
          runBtn.disabled = false;
          runBtn.innerHTML = originalText;
        }
      }, 500);
    }

    // Execute code based on language
    function executeCode(code, language) {
      // Note: This is a client-side simulation
      // In a real application, you would send the code to a backend API for execution
      
      switch(language) {
        case 'javascript':
          try {
            // Capture console.log output
            let outputText = '';
            const originalLog = console.log;
            console.log = function(...args) {
              outputText += args.join(' ') + '\n';
              originalLog.apply(console, args);
            };
            
            eval(code);
            console.log = originalLog;
            return outputText || 'Code executed successfully (no output)';
          } catch (error) {
            throw new Error(error.message);
          }

        case 'python':
          // Python execution would require a backend API
          return simulatePythonExecution(code);

        case 'java':
        case 'cpp':
        case 'c':
        case 'csharp':
          // These languages require compilation, would need backend API
          return simulateCompiledLanguageExecution(code, language);

        default:
          return 'Language not supported for client-side execution';
      }
    }

    // Simulate Python execution
    function simulatePythonExecution(code) {
      // Check for common Python patterns
      if (code.includes('print(')) {
        const printMatches = code.match(/print\(['"](.*?)['"]\)/g);
        if (printMatches) {
          return printMatches.map(match => {
            const content = match.match(/['"](.*?)['"]/)[1];
            return content;
          }).join('\n');
        }
      }
      
      if (code.includes('error') || code.includes('Error')) {
        return 'Error: Syntax error or runtime error detected';
      }
      
      return 'Code executed successfully!\nNote: Full Python execution requires backend API.';
    }

    // Simulate compiled language execution
    function simulateCompiledLanguageExecution(code, language) {
      if (code.includes('cout') || code.includes('printf') || code.includes('Console.WriteLine') || code.includes('System.out.println')) {
        const outputMatches = code.match(/(?:cout|printf|Console\.WriteLine|System\.out\.println)\(['"](.*?)['"]\)/g);
        if (outputMatches) {
          return outputMatches.map(match => {
            const content = match.match(/['"](.*?)['"]/);
            return content ? content[1] : '';
          }).join('\n');
        }
      }
      
      return `Code compiled and executed successfully!\nNote: Full ${language.toUpperCase()} execution requires backend compilation service.`;
    }

    // Format code function
    function formatCode() {
      const language = languageSelect.value;
      const code = codeEditor.value;
      
      // Basic formatting (indentation)
      let formatted = code;
      
      // Simple indentation formatter
      if (language === 'python' || language === 'javascript') {
        formatted = formatIndentation(code);
      }
      
      codeEditor.value = formatted;
      output.textContent = 'Code formatted successfully!';
      output.className = 'output-success';
      
      setTimeout(() => {
        output.textContent = 'Output will appear here...';
        output.className = '';
      }, 2000);
    }

    // Simple indentation formatter
    function formatIndentation(code) {
      const lines = code.split('\n');
      let indentLevel = 0;
      const indentSize = 2;
      
      return lines.map(line => {
        const trimmed = line.trim();
        if (!trimmed) return '';
        
        // Decrease indent for closing braces/brackets
        if (trimmed.startsWith('}') || trimmed.startsWith(']') || trimmed.startsWith(')')) {
          indentLevel = Math.max(0, indentLevel - 1);
        }
        
        const indented = ' '.repeat(indentLevel * indentSize) + trimmed;
        
        // Increase indent for opening braces/brackets
        if (trimmed.endsWith('{') || trimmed.endsWith('[') || trimmed.endsWith('(')) {
          indentLevel++;
        }
        
        return indented;
      }).join('\n');
    }

    // Initialize on page load
    initializeEditor();
  </script>
</body>
</html>

